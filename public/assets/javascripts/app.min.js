!function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var r,i=t(document);t.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var r=t('meta[name="csrf-token"]').attr("content");r&&e.setRequestHeader("X-CSRF-Token",r)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),r=t("meta[name=csrf-param]").attr("content");t('form input[name="'+r+'"]').val(e)},fire:function(e,r,i){var n=t.Event(r);return e.trigger(n,i),n.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(i){var n,a,s,o,c,l,u,h;if(r.fire(i,"ajax:before")){if(o=i.data("cross-domain"),c=o===e?null:o,l=i.data("with-credentials")||null,u=i.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,i.is("form")){n=i.attr("method"),a=i.attr("action"),s=i.serializeArray();var f=i.data("ujs:submit-button");f&&(s.push(f),i.data("ujs:submit-button",null))}else i.is(r.inputChangeSelector)?(n=i.data("method"),a=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):i.is(r.buttonClickSelector)?(n=i.data("method")||"get",a=i.data("url"),s=i.serialize(),i.data("params")&&(s=s+"&"+i.data("params"))):(n=i.data("method"),a=r.href(i),s=i.data("params")||null);return h={type:n||"GET",data:s,dataType:u,beforeSend:function(t,n){return n.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+n.accepts.script),r.fire(i,"ajax:beforeSend",[t,n])?void i.trigger("ajax:send",t):!1},success:function(t,e,r){i.trigger("ajax:success",[t,e,r])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,r){i.trigger("ajax:error",[t,e,r])},crossDomain:c},l&&(h.xhrFields={withCredentials:l}),a&&(h.url=a),r.ajax(h)}return!1},handleMethod:function(i){var n=r.href(i),a=i.data("method"),s=i.attr("target"),o=t("meta[name=csrf-token]").attr("content"),c=t("meta[name=csrf-param]").attr("content"),l=t('<form method="post" action="'+n+'"></form>'),u='<input name="_method" value="'+a+'" type="hidden" />';c!==e&&o!==e&&(u+='<input name="'+c+'" value="'+o+'" type="hidden" />'),s&&l.attr("target",s),l.hide().append(u).appendTo("body"),l.submit()},formElements:function(e,r){return e.is("form")?t(e[0].elements).filter(r):e.find(r)},disableFormElements:function(e){r.formElements(e,r.disableSelector).each(function(){r.disableFormElement(t(this))})},disableFormElement:function(t){var r,i;r=t.is("button")?"html":"val",i=t.data("disable-with"),t.data("ujs:enable-with",t[r]()),i!==e&&t[r](i),t.prop("disabled",!0)},enableFormElements:function(e){r.formElements(e,r.enableSelector).each(function(){r.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,i=t.data("confirm"),n=!1;return i?(r.fire(t,"confirm")&&(n=r.confirm(i),e=r.fire(t,"confirm:complete",[n])),n&&e):!0},blankInputs:function(e,r,i){var n,a,s=t(),o=r||"input,textarea",c=e.find(o);return c.each(function(){if(n=t(this),a=n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val(),!a==!i){if(n.is("input[type=radio]")&&c.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;s=s.add(n)}}),s.length?s:!1},nonBlankInputs:function(t,e){return r.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var i=t.data("disable-with");t.data("ujs:enable-with",t.html()),i!==e&&t.html(i),t.bind("click.railsDisable",function(t){return r.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},r.fire(i,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,i){t.crossDomain||r.CSRFProtection(i)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),i.delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(t(this))}),i.delegate(r.buttonDisableSelector,"ajax:complete",function(){r.enableFormElement(t(this))}),i.delegate(r.linkClickSelector,"click.rails",function(i){var n=t(this),a=n.data("method"),s=n.data("params"),o=i.metaKey||i.ctrlKey;if(!r.allowAction(n))return r.stopEverything(i);if(!o&&n.is(r.linkDisableSelector)&&r.disableElement(n),n.data("remote")!==e){if(o&&(!a||"GET"===a)&&!s)return!0;var c=r.handleRemote(n);return c===!1?r.enableElement(n):c.error(function(){r.enableElement(n)}),!1}return a?(r.handleMethod(n),!1):void 0}),i.delegate(r.buttonClickSelector,"click.rails",function(e){var i=t(this);if(!r.allowAction(i))return r.stopEverything(e);i.is(r.buttonDisableSelector)&&r.disableFormElement(i);var n=r.handleRemote(i);return n===!1?r.enableFormElement(i):n.error(function(){r.enableFormElement(i)}),!1}),i.delegate(r.inputChangeSelector,"change.rails",function(e){var i=t(this);return r.allowAction(i)?(r.handleRemote(i),!1):r.stopEverything(e)}),i.delegate(r.formSubmitSelector,"submit.rails",function(i){var n,a,s=t(this),o=s.data("remote")!==e;if(!r.allowAction(s))return r.stopEverything(i);if(s.attr("novalidate")==e&&(n=r.blankInputs(s,r.requiredInputSelector),n&&r.fire(s,"ajax:aborted:required",[n])))return r.stopEverything(i);if(o){if(a=r.nonBlankInputs(s,r.fileInputSelector)){setTimeout(function(){r.disableFormElements(s)},13);var c=r.fire(s,"ajax:aborted:file",[a]);return c||setTimeout(function(){r.enableFormElements(s)},13),c}return r.handleRemote(s),!1}setTimeout(function(){r.disableFormElements(s)},13)}),i.delegate(r.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!r.allowAction(i))return r.stopEverything(e);var n=i.attr("name"),a=n?{name:n,value:i.val()}:null;i.closest("form").data("ujs:submit-button",a)}),i.delegate(r.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&r.disableFormElements(t(this))}),i.delegate(r.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&r.enableFormElements(t(this))}),t(function(){r.refreshCSRFTokens()}))}(jQuery),function(t){t.fn.rwdImageMaps=function(){var e=this,r=function(){e.each(function(){if("undefined"!=typeof t(this).attr("usemap")){var e=this,r=t(e);t("<img />").load(function(){var e="width",i="height",n=r.attr(e),a=r.attr(i);if(!n||!a){var s=new Image;s.src=r.attr("src"),n||(n=s.width),a||(a=s.height)}var o=r.width()/100,c=r.height()/100,l=r.attr("usemap").replace("#",""),u="coords";t('map[name="'+l+'"]').find("area").each(function(){var e=t(this);e.data(u)||e.data(u,e.attr(u));for(var r=e.data(u).split(","),i=new Array(r.length),s=0;s<i.length;++s)i[s]=parseInt(s%2===0?r[s]/n*100*o:r[s]/a*100*c);e.attr(u,i.toString())})}).attr("src",r.attr("src"))}})};return t(window).resize(r).trigger("resize"),this}}(jQuery),function(t){"use strict";var e=function(t,e){return new n(t,e||{})};t.JsonQuery=e,e.VERSION="0.0.2",Object.defineProperty||(Object.defineProperty=function(t,e,r){t[e]=r.get});var r=function(t,e,r){if(t.length===+t.length)for(var i=0,n=t.length;n>i;i++)e.call(r,t[i],i);else for(var a in t)hasOwnProperty.call(t,a)&&e.call(r,t[a],a)},i=function(t,e,r){for(var i=0,n=t.length;n>i;i++)if(e.call(r,t[i],i)===!1)return},n=function(t,e){this.records=t||[],this.getterFns=e.getterFns||{},this.lat=e.latitude||"latitude",this.lng=e.longitude||"longitude",this.id=e.id,this.records.length&&s(this,t[0],e.schema)},a=n.prototype,s=function(t,e,r){t.schema={},t.id||(t.id=e._id?"_id":"id"),r||(c.call(t,e),l.call(t,e))},o=function(t){if(null==t)return"String";var e=Object.prototype.toString.call(t).slice(8,-1);return"String"==e&&t.match(/\d{4}-\d{2}-\d{2}/)?"Date":e},c=function(t,e){var r,i,n,a;for(r in t)a=t[r],i=o(a),n=e?e+"."+r:r,this.schema[n]=i,"Object"==i?c.call(this,a,n):"Array"==i&&(["Object","Array"].indexOf(o(a[0]))>-1?c.call(this,t[r][0],n):this.schema[n]=o(a[0]))},l=function(t){var e,r,i;for(e in this.schema){r=this.schema[e];try{this.getterFns[e]||(this.getterFns[e]=h.call(this,e,r)),i=this.getterFns[e](t),"Array"==o(i)&&(this.schema[e]="Array")}catch(n){console.log("Error while generating getter function for selector : "+e+" NOTE: Define manually")}}},u=function(t,e){for(var r,i=0,n=0,a=e.length-1,s=e.length-1;s>=0;s--)r=e.slice(0,s+1).join("."),"Array"==t[r]&&a>s&&(i=s,n+=1);return n>1?i+1:-1},h=function(t){for(var e,r,i,n="",a=t.split("."),s=u(this.schema,a),o=a.length-1;o>=0;o--)e=a.slice(0,o+1).join("."),r="['"+a[o]+"']",n="Array"==this.schema[e]?s==o?r+(n.length?".map(function(r"+o+"){  objs.push(r"+o+n+")})":""):r+(n.length?".map(function(r"+o+"){  return r"+o+n+"})":""):r+n;return i=s>-1?"var objs = []; obj"+n+";"+("Date"==this.schema.path?"return parseDate(objs)":"return objs;"):"return "+("Date"==this.schema.path?"parseDate(obj"+n+");":"obj"+n+";"),new Function("obj",i)};a.operators={eq:function(t,e){return t==e},ne:function(t,e){return t!=e},lt:function(t,e){return e>t},lte:function(t,e){return e>=t},gt:function(t,e){return t>e},gte:function(t,e){return t>=e},"in":function(t,e){return e.indexOf(t)>-1},ni:function(t,e){return-1==e.indexOf(t)},li:function(t,e){return e.test(t)},bt:function(t,e){return t>=e[0]&&t<=e[1]}},a.addOperator=function(t,e){this.operators[t]=e};var f=function(t,e,r){var i=0,n=t.length;for(i;n>i;i++)if(r(t[i],e))return!0};a.addCondition=function(t,e){this.operators[t]=e},a.getCriteria=function(t){var e=t.split(".$");return{field:e[0],operator:e[1]||"eq"}},a.setGetterFn=function(t,e){this.getterFns[t]=e},a.addRecords=function(t){return t&&t.length?("Array"==o(t)?this.records=this.records.concat(t):this.records.push(t),this.schema||s(this,t[0]),!0):!1},a._findAll=function(t,e,i,n){var a,s,o,c=[],l=this.getterFns[e];return"li"==n&&"string"==typeof i&&(i=new RegExp(i)),a=this.operators[n],"Array"==this.schema[e]&&(o=a,a=f),r(t,function(t){s=l(t),a(s,i,o)&&c.push(t)}),c},a.find=function(t,e){var r,n;return e||(e=t,t=this.id),n=this.getterFns[t],i(this.records,function(t){return n(t)==e?(r=t,!1):void 0}),r},r(["where","or","groupBy","select","pluck","limit","offset","order","uniq","near"],function(t){a[t]=function(){var e=new j(this,this.records);return e[t].apply(e,arguments),e}}),r(["count","first","last","all"],function(t){Object.defineProperty(a,t,{get:function(){return new j(this,this.records)[t]}})});var d=function(t,e,r){for(var i=0,n=r.length;n>i;i++)if(this.getterFns[r[i]](t)!==this.getterFns[r[i]](e))return!1;return!0},m=function(t,e){var r,i,n;for(r in t)i=this.jQ.getCriteria(r),n=this.jQ._findAll(n||e,i.field,t[r],i.operator);return n},p=function(t,e){{var i,n=this.jQ.getterFns[t],a={};e.length}return r(e,function(t){i=n(t),(a[i]||(a[i]=[])).push(t)}),a},b=function(t,e){for(var r,i,n=e.slice(0),a=0,s=t.length;s>a;a++)r=this.jQ.getterFns[t[a].field],i="asc"==t[a].direction?1:-1,n.sort(function(t,e){var n=r(t),a=r(e);return(a>n?-1:n>a?1:0)*i});return n},g=function(t,e){var i,n=this,a=[];return r(t,function(t){i=n.jQ.getterFns[t],r(e,function(e,r){(a[r]||(a[r]={}))[t]=i(e)})}),a},v=function(t,e){var i=this.jQ.getterFns[t],n=[];return r(e,function(t){n.push(i(t))}),n},y=function(t,e){var i=[],n=this;return"Object"!=o(e[0])?(r(e,function(t){-1==i.indexOf(t)&&i.push(t)}),i):(i.push(e[0]),r(e,function(e){for(var r=!1,a=0,s=i.length;s>a;a++)d.call(n.jQ,i[a],e,t)&&(r=!0);r||i.push(e)}),i)},j=function(t,e){return this.jQ=t,this.records=e,this.criteria={},this},_=j.prototype;_.each=function(t,e){r(this.exec()||[],t,e)},_.exec=_.toArray=function(t){var e;return this.criteria.all&&(e=this.records),this.criteria.where&&(e=m.call(this,this.criteria.where,e||this.records)),this.criteria.or&&(e=e.concat(m.call(this,this.criteria.or,this.records)),e=y.call(this,[this.jQ.id],e)),this.criteria.order&&(e=b.call(this,this.criteria.order,e||this.records)),this.criteria.near&&(e=x.call(this,this.criteria.near,e||this.records)),this.criteria.uniq&&(e=y.call(this,this.criteria.uniq,e||this.records)),this.criteria.select&&(e=g.call(this,this.criteria.select,e||this.records)),this.criteria.pluck&&(e=v.call(this,this.criteria.pluck,e||this.records)),this.criteria.limit&&(e=(e||this.records).slice(this.criteria.offset||0,(this.criteria.offset||0)+this.criteria.limit)),this.criteria.group_by&&(e=p.call(this,this.criteria.group_by,e||this.records)),t&&r(e||this.records,t),e||(e=this.records),this.jQ.onResult&&this.jQ.onResult(e,this.criteria),e};var w=function(t,e){var r;this.criteria[t]||(this.criteria[t]={});for(r in e)this.criteria[t][r]=e[r];return this};_.where=function(t){return w.call(this,"where",t)},_.or=function(t){return w.call(this,"or",t)},_.groupBy=function(t){return this.criteria.group_by=t,this},_.select=function(){return this.criteria.select=arguments,this},_.pluck=function(t){return this.criteria.pluck=t,this},_.limit=function(t){return this.criteria.limit=t,this},_.offset=function(t){return this.criteria.offset=t,this},_.order=function(t){var e;this.criteria.order=this.criteria.order||[];for(e in t)this.criteria.order.push({field:e,direction:t[e].toLowerCase()});return this},_.uniq=function(){return this.criteria.uniq=arguments.length>0?arguments:!0,this},Object.defineProperty(_,"count",{get:function(){this.criteria.count=!0;var t=this.exec();return"Array"==o(t)?this.exec().length:Object.keys(t).length}}),Object.defineProperty(_,"all",{get:function(){return this.criteria.all=!0,this.exec()}}),Object.defineProperty(_,"first",{get:function(){return this.criteria.first=!0,this.exec()[0]}}),Object.defineProperty(_,"last",{get:function(){this.criteria.last=!0;var t=this.exec();return t[t.length-1]}});var S={redius:6371,toRad:function(t){return t*Math.PI/180}},k=function(t,e,r,i){var n=S.toRad(e-t),a=S.toRad(i-r),t=S.toRad(t),e=S.toRad(e),s=Math.sin(n/2)*Math.sin(n/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(t)*Math.cos(e);return 2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s))*S.redius},x=function(t,e){var i=[],n=this,a="mile"==t.unit?.6214:1,s=n.jQ.getterFns[n.jQ.lat],o=n.jQ.getterFns[n.jQ.lng];return r(e,function(e){e._distance=k(s(e),t.lat,o(e),t.lng)*a,e._distance<=t.distance&&i.push(e)}),i.sort(function(t,e){return t._distance<e._distance?-1:t._distance>e._distance?1:0}),i};_.near=function(t,e,r,i){return this.criteria.near={lat:t,lng:e,distance:r,unit:i||"km"},this},_.map=_.collect=function(t){var e,r=[];return this.exec(function(i){(e=t(i))&&r.push(e)}),r},_.sum=function(t){var e,i=0,n=this.jQ.getterFns[t];return this.criteria.group_by&&(e=!0,i={}),this.exec(function(t,a){e?(i[a]=0,r(t,function(t){i[a]=i[a]+(n(t)||0)})):i+=n(t)||0}),i},_.toJQ=function(){var t=e(this.all,{schema:!0});return t.schema=this.jQ.schema,t.getterFns=this.jQ.getterFns,t}}(this),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var r=e||0,i=this.length;i>r;r++)if(this[r]===t)return r;return-1}),function(t,e,r){"use strict";var i=function(t,e,r){var a=new n(t,e,r);return i.list.push(a),a};i.VERSION="2.0.0",i.list=[],t.fn.filterjs=function(e,r){var n=t(this);n.data("fjs")||n.data("fjs",i(e,n,r))},e.FilterJS=i;var n=function(e,r,i){var n=this;this.opts=i||{},this.callbacks=this.opts.callbacks||{},this.$container=t(r),this.view=this.opts.view||o,this.templateFn=this.template(t(this.opts.template).html()),this.criterias=[],this._index=1,t.each(this.opts.criterias||[],function(){n.addCriteria(this)}),this.Model=JsonQuery(),this.Model.getterFns._fid=function(t){return t._fid},this.addRecords(e)},a=n.prototype;Object.defineProperty(a,"records",{get:function(){return this.Model.records}}),Object.defineProperty(a,"recordsCount",{get:function(){return this.Model.records.length}});var s={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};a.template=function(t,e){var r=s,i="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(r.escape,function(t,e){return"',escapeStr("+e.replace(/\\'/g,"'")+"),'"}).replace(r.interpolate,function(t,e){return"',"+e.replace(/\\'/g,"'")+",'"}).replace(r.evaluate||null,function(t,e){return"');"+e.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",n=new Function("obj",i);return e?n(e):function(t){return n(t)}},a.execCallback=function(t,e){this.callbacks[t]&&this.callbacks[t].call(this,e)},a.addCallback=function(t,e){t&&e&&(this.callbacks[t]=e)},a.addRecords=function(t){!!this.Model.schema;this.execCallback("beforeAddRecords",t),this.Model.addRecords(t)&&(this.has_scheme||this.initSearch(this.opts.search),this.render(t),this.filter()),this.execCallback("afterAddRecords",t)},a.removeRecords=function(e){var r;if(t.isPlainObject(e)?r=this.Model.where(e).pluck("_fid").all:t.isArray(e)&&(r=this.Model.where({"id.$in":e}).pluck("_fid").all),!r)return!1;for(var i,n=this.Model.records,a=0,s=r.length,o=n.length-1;o>-1&&(i=n[o]._fid,r.indexOf(i)>-1&&(n.splice(o,1),a++,t("#fjs_"+i).remove()),a!=s);o--);return this.execCallback("afterRemove"),!0};var o=function(t){return this.templateFn(t)};a.render=function(e){var r,i=this;if(e.length){this.execCallback("beforeRender",e);var n="beforeRecordRender";t.each(e,function(e){i.execCallback(n,this),this._fid=i._index++,r=t(t.trim(i.view.call(i,this,e))),r.attr("id","fjs_"+this._fid),r.addClass("fjs_item"),i.$container.append(r)})}};var c=function(t){var e=t.$ele,r=t.$ele.attr("type");return t.selector||("INPUT"==e.get(0).tagName?t.selector="checkbox"==r||"radio"==r?":checked":":input":"SELECT"==e.get(0).tagName&&(t.selector="select")),t.event||(t.event="checkbox"==r||"radio"==r?"click":"change"),t};a.addCriteria=function(e){var r=this;return e?(t.isArray(e)?t.each(e,function(){l.call(r,this)}):l.call(r,e),!0):!1};var l=function(e){return e&&e.field&&e.ele?(e.$ele=t(e.ele),e.$ele.length?(e=c(e),this.bindEvent(e.ele,e.event),e._q=e.field+("range"==e.type?".$bt":""),e.active=!0,this.criterias.push(e),!0):!1):!1};a.removeCriteria=function(e){var r,i,n=this;t.each(n.criterias,function(t){this.field==e&&(i=t)}),null!=i&&(r=this.criterias.splice(i,1)[0],t("body").off(r.event,r.ele))};var u=function(e,r){var i=this;e&&(t.isArray(e)||(e=[e]),t.each(e,function(){var e=this;t.each(i.criterias,function(){this.field==e&&(this.active=r)})}))};a.deactivateCriteria=function(t){u.call(self,t,!1)},a.activateCriteria=function(t){u.call(this,t,!0)};var h=function(e,r){var i=[];return e.$ele.filter(e.selector).each(function(){i.push(t(this).val())}),t.isArray(i[0])&&(i=[].concat.apply([],i)),e.all&&i.indexOf(e.all)>-1?[]:("range"==e.type&&(i=i[0].split("-")),r.execCallback("onFilterSelect",{criteria:e,values:i})||i)};a.lastResult=function(){return this.last_result||this.records},a.filter=function(){var e,r,i={},n=0,a=this;return t.each(this.criterias,function(){this.active&&(e=h(this,a),e&&e.length&&(r=t.isArray(e)&&!this.type?this._q+".$in":this._q,i[r]=e,n+=1))}),this.last_result=n?this.Model.where(i).all:this.Model.all,this.searchFilter(this.last_result)?i:(this.show(this.last_result),this.execCallback("afterFilter",this.last_result),i)},a.show=function(e){t(".fjs_item").hide();for(var r=0,i=e.length;i>r;r++)t("#fjs_"+e[r]._fid).show()},a.filterTimer=function(t){var e=this;this.filterTimeoutId&&clearTimeout(this.filterTimeoutId),this.filterTimeoutId=setTimeout(function(){e.filter()},t)},a.bindEvent=function(e,i){var n=this;t(r).on(i,e,function(){n.filterTimer(n.opts.timeout||30)})},a.initSearch=function(e){(e||e.ele)&&(e.start_length||(this.opts.search.start_length=2),this.$search_ele=t(this.opts.search.ele),this.$search_ele.length&&(this.has_search=!0,this.searchFn=this.buildSearchFn(e.fields),this.bindEvent(e.ele,"keyup")))},a.buildSearchFn=function(e){var r=this,i=[];return e?t.each(e,function(){i.push(r.Model.getterFns[this])}):t.each(r.Model.getterFns,function(t,e){i.push(e)}),function(t,e){t=t.toLocaleUpperCase();for(var r=0,n=i.length;n>r;r++)if((i[r](e)+"").toLocaleUpperCase().indexOf(t)>-1)return!0;return!1}},a.searchFilter=function(e){if(this.has_search){var r,i=t.trim(this.$search_ele.val());return i.length<this.opts.search.start_length?!1:(r=this.search(i,e||this.lastResult()),this.show(r),this.execCallback("afterFilter",r),!0)}},a.search=function(t,e){t=t.toLocaleUpperCase();for(var r=[],i=0,n=e.length;n>i;i++)this.searchFn(t,e[i])&&r.push(e[i]);return r},a.setStreaming=function(t){t&&(this.opts.streaming=t,t.data_url&&(t.stream_after=1e3*(t.stream_after||2),t.batch_size=t.batch_size||!1,this.streamData(t.stream_after)))};var f=function(){var e=this,r=this.opts.params||{},i=this.opts.streaming;r.offset=this.recordsCount,i.batch_size&&(r.limit=i.batch_size),this.has_search&&(r.q=t.trim(this.$search_ele.val())),t.getJSON(i.data_url,r).done(function(t){null==r.limit||t&&t.length?(e.setStreamInterval(),e.addRecords(t)):e.stopStreaming()}).fail(function(){e.stopStreaming()})};a.setStreamInterval=function(){var t=this;1!=t.opts.streaming.stop&&(t.streamingTimer=setTimeout(function(){f.call(t)},t.opts.streaming.stream_after))},a.stopStreaming=function(){this.opts.streaming.stop=!0,this.streamingTimer&&clearTimeout(this.streamingTimer)},a.resumeStreaming=function(){this.opts.streaming.stop=!1,this.streamData(this.opts.streaming.stream_after)},a.streamData=function(){this.setStreamInterval(),this.opts.streaming.batch_size||this.stopStreaming()}}(jQuery,window,document),function(t){jQuery.fn.soundCloudURL=function(e){var r=this;t.get("http://api.soundcloud.com/resolve.json?url="+e+"&client_id=YOUR_CLIENT_ID",function(e){t(r).html('<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/'+e.id+'&color=ff5500&auto_play=false&hide_related=false&show_comments=false&show_user=false&show_reposts=false&show_artwork=false"></iframe>')})}}(jQuery),function(t){jQuery.fn.videoYT=function(e){var r="";e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(r=e[2].split(/[^0-9a-z_\-]/i),r=r[0]):r=e,t(this).html('<iframe width="100%" height="auto" src="https://www.youtube-nocookie.com/embed/'+r+'?rel=0&modestbranding=1&autohide=1&showinfo=0" frameborder="0" allowfullscreen>test</iframe>')}}(jQuery);